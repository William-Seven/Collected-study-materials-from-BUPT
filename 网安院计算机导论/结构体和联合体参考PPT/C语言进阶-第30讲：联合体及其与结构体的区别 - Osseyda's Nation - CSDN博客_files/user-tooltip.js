"use strict";!function(P,i,V){var e,s,n="https://g.csdnimg.cn/user-tooltip/1.7/",I="<img src="+n+"images/icon-domain-grey.png />",E="<img src="+n+"images/icon-domain.png />",L="<img src="+n+"images/icon-vip.png />",R="<img src="+n+"images/icon-writer.png />",W={getUserProfileUrl:"https://me.csdn.net/api/external/user/getUserProfile",checkFollowUrl:"https://me.csdn.net/api/relation/check",doFollowUrl:"https://me.csdn.net/api/relation/create",doUnfollowUrl:"https://me.csdn.net/api/relation/destroy",ref:"miniprofile",defaultUserProfile:{username:"yanlinpu",avatarurl:"https://profile.csdnimg.cn/1/1/B/1_yanlinpu",vip:!1,expert:!1,nickname:"木林森001",fans_num:"2万",identity:[{name:"专家"},{name:"版主"}],medal:[{type:"203",codename:"111",image:"https://g.csdnimg.cn/static/user-medal/1024huodong.svg"}]}};if(void 0===P.csdn&&(P.csdn={}),!jQuery)return;e=n+"user-tooltip.css",(s=i.createElement("link")).rel="stylesheet",s.type="text/css",s.href=e,i.getElementsByTagName("head")[0].appendChild(s),P.csdn.userTooltip=function(e){var s,n,c,v,b;e&&V.extend(W,e);var U,k={},j={},B="",F=!1;i.domain="csdn.net";var D=function(e){for(var s=i.cookie.split("; "),n=0;n<s.length;n++){var t=s[n].split("=");if(t[0]==e&&"UD"==e)return decodeURIComponent(t[1]);if(t[0]==e)return decodeURI(t[1])}}("UserName");function N(){j[v].flag&&(V("#csdn-userTooltip .person_deliver").mouseover(function(){V(this).hasClass("person_deliver_letter")&&V(this).html("取&nbsp;&nbsp;&nbsp;消")}),V("#csdn-userTooltip .person_deliver").mouseout(function(){V(this).hasClass("person_deliver_letter")&&V(this).html("已关注")})),V("#csdn-userTooltip .person_deliver").click(function(){var e,s;if(D){var n=V(this);if(0==j[v].flag){if(!n.hasClass("person_deliver_letter_un"))return!1;e=W.doFollowUrl,V.ajax({type:"post",url:e,dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0,data:JSON.stringify({username:v}),success:function(e){200==parseInt(e.code)&&(n.html("已关注").removeClass("person_deliver_letter_un").addClass("person_deliver_letter"),n.mouseover(function(){n.html("取&nbsp;&nbsp;&nbsp;消")}),n.mouseout(function(){n.html("已关注")})),P.csdn&&P.csdn.watchBtnChange&&P.csdn.watchBtnChange(1,v),j[v].flag=!0,j[v].followClass="person_deliver person_deliver_letter",j[v].followStr="已关注"}})}else s=W.doUnfollowUrl,V.ajax({type:"post",url:s,xhrFields:{withCredentials:!0},crossDomain:!0,data:JSON.stringify({username:v}),dataType:"json",success:function(e){200==parseInt(e.code)&&(n.html("关注").removeClass("person_deliver_letter").addClass("person_deliver_letter_un"),n.unbind("mouseover"),n.unbind("mouseout")),P.csdn&&P.csdn.watchBtnChange&&P.csdn.watchBtnChange(0,v),j[v].flag=!1,j[v].followClass="person_deliver person_deliver_letter_un",j[v].followStr="关注"}})}else P.location.href="https://passport.csdn.net/"})}function S(e){var s,n=e.offset(),t=n.left,i=n.top,a=e.width(),o=e.height(),l=e[0].getBoundingClientRect(),r={};return l&&Number(l.top,10)<162?(s="left:"+(t-50+a/2)+"px;top:"+(i+o+15)+"px",r.isBottom=!0):s="left:"+(t-50+a/2)+"px;top:"+(i-165)+"px",r.position=s,r}function t(){V("#csdn-userTooltip").remove()}V(i).on("mouseenter","img[username], #csdn-userTooltip",function(e){e=e||P.event;function C(e,s,n,t,i,a,o,l,r,d,c,p,u,m,f){f=f||"<a href='javascript:void(0)' class='person_deliver person_deliver_letter_un'>关注</a>";var h="<div id='csdn-userTooltip' style='"+p.position+"' data-mod='popu_60' class='tracking-ad"+(p.isBottom?" csdn-userTooltip-pos":" csdn-userTooltip-default")+"'><div class='person-info-div clearfix'><dt class='touxiang'><img src='"+e+"'></dt><div class='csdn-left-info'><dd class='person_info'><em class='name"+(s?" name_short":"")+"'>"+n+"</em>"+m+"</dd>"+r+u+"</div></div><div class='follow-div clearfix'>"+f+(a?"<em class='fav'>粉丝 "+a+"</em>":"")+"<a class='visoter'  target='_blank'href='http://me.csdn.net/"+v+"?ref="+W.ref+"'>访问主页</a><div style = 'height:16px;width:1px;background:#F0F0F0;margin:11px 8px 0;float:right!important;'></div><a class='visoter' target='_blank' href='https://im.csdn.net/im/main.html?userName="+v+"'>私信</a></div>";V("body").append(h)}return c=V(e.target||e.srcElement),b=V(this),clearTimeout(n),clearTimeout(s),null!=V(this).attr("username")&&(s=setTimeout(function(){V("#csdn-userTooltip").length&&V("#csdn-userTooltip").remove();v=b.attr("username");var e,s,n,t,i,a,o,l,r,d,T,x="";{if(!(c.closest("#csdn-userTooltip").length<=0))return!1;V("#csdn-userTooltip").remove()}j[v]?(e=j[v].followClass,s=j[v].followStr,n=j[v].avatarurl,t=j[v].nickname,i=j[v].isVip,a=j[v].hasDomain,o=j[v].isBlogWriter,l=j[v].favsCount,r=j[v].interestname,d=j[v].huistr,x=S(b),U=i?"<span class='icon_vip'>"+L+"</span>":"",U+=o?"<span class='icon_writer'>"+R+"</span>":"",B="<dd class='csdn-domain'>"+(B=a?"<li class='has-domain'>"+E+"<a href='https://"+a+".blog.csdn.net'>"+a+".blog.csdn.net</a></li>":"<li class='medal no-domain'>"+I+"暂未设置自定义域名</li>")+"</dd>",D?(e&&s&&(T="<a href='javascript:void(0)' class='"+e+"'>"+s+"</a>"),D===v&&(T=""),C(n,r,t,i,o,l,e,s,d,void 0,F,x,B,U,T),N()):(C(n,r,t,i,o,l,e,s,d,void 0,F,x,B,U,T),V("#csdn-userTooltip .person_deliver").click(function(){P.location.href="https://passport.csdn.net/"}))):V.ajax({type:"get",url:W.getUserProfileUrl+"?username="+v,contentType:"application/json",dataType:"json",xhrFields:{withCredentials:!0},crossDomain:!0,success:function(e){var s,n,t,i,a,o,l,r,d,c,p,u,m="",f="",h="",v="",g=!1;if(200===Number(e.code,10)){if(s=e.data||W.defaultUserProfile,!(u=s.username))return!1;if(n=s.avatarurl,t=s.nickname||u,i=s.fans_num,a=s.vip,o=s.domain,l=s.expert,r=s.medal?s.medal:[],0<(d=r.length)&&(g=!0),U=a?"<span class='icon_vip'>"+L+"</span>":"",U+=l?"<span class='icon_writer'>"+R+"</span>":"",B="<dd class='csdn-domain'>"+(B=o?"<li class='has-domain'>"+E+"<a href='https://"+o+".blog.csdn.net'>"+o+".blog.csdn.net</a></li>":"<li class='medal no-domain'>"+I+"暂未设置自定义域名</li>")+"</dd>",g){99999<r.length?(c=99999,p=!0):c=r.length;for(var _=0;_<c;_++)h+="<li class='medal' title='"+r[_].codename+"'><img src='"+r[_].image+"' alt='胸章'></li>";p&&(h+='<li class="medal medal-icon"><svg id="csdnc-m-blank" viewBox="0 0 1024 1024" width="100%" height="100%" fill="#ccc"><path d="M516.266311 77.945505a8.788601 8.788601 0 0 0-8.532622 0L121.461878 292.455629a8.319307 8.319307 0 0 0-4.351637 7.252729v424.583284c0 2.986418 1.663861 5.75952 4.351637 7.252729l386.271811 214.510124a8.788601 8.788601 0 0 0 8.532622 0l386.271811-214.510124a8.319307 8.319307 0 0 0 4.351637-7.252729V299.708358a8.319307 8.319307 0 0 0-4.351637-7.252729L516.266311 77.945505z m37.671528-67.066412l386.314473 214.552788a85.027581 85.027581 0 0 1 43.900342 74.276477v424.583284c0 30.802766-16.809266 59.216399-43.943005 74.276477l-386.27181 214.552788c-26.024498 14.462795-57.808516 14.462795-83.875678 0l-386.314473-214.552788a85.027581 85.027581 0 0 1-43.900342-74.276477V299.708358c0-30.802766 16.809266-59.216399 43.943005-74.276477L470.019498 10.879093c26.024498-14.462795 57.808516-14.462795 83.875677 0z"></path></svg>'+r.length+"</li>"),h="<dd class='medals'><ul>"+h+"</ul></dd>"}else h="<dd class='medals'><ul>"+(h="<li class='medal no-medals'>一个勋章都没有...</li>")+"</ul></dd>";if(null!=s.identity)for(var w=0;w<s.identity.length;w++){s.identity[w].name&&(w<s.identity.length-1?v+=s.identity[w].name+"<em>|</em>":v+=s.identity[w].name)}if(D){var y=W.checkFollowUrl+"?follows="+u;V.ajax({type:"get",url:y,xhrFields:{withCredentials:!0},dataType:"json",success:function(e){var s;200===e.code&&e.data&&(F=0===e.data[u]?(m="person_deliver person_deliver_letter_un",!(f="关注")):(m="person_deliver person_deliver_letter",f="已关注",!0)),x=S(b),m&&m&&(s="<a href='javascript:void(0)' class='"+m+"'>"+f+"</a>"),D===u&&(s=""),C(n,v,t,a,l,i,m,f,h,d,F,x,B,U,s),k[u]={},k[u].avatarurl=n,k[u].nickname=t,k[u].isVip=a,k[u].hasDomain=o,k[u].isBlogWriter=l,k[u].favsCount=i,k[u].interestname=v,k[u].followClass=m,k[u].followStr=f,k[u].huistr=h,k[u].huicount=d,k[u].flag=F,j[u]=k[u],N()}})}else x=S(b),C(n,v,t,a,l,i,m,f,h,d,F,x,B,U,T),V("#csdn-userTooltip .person_deliver").click(function(){P.location.href="https://passport.csdn.net/"}),k[u]={},k[u].avatarurl=n,k[u].nickname=t,k[u].isVip=a,k[u].hasDomain=o,k[u].isBlogWriter=l,k[u].favsCount=i,k[u].interestname=v,k[u].huistr=h,k[u].huicount=d,j[u]=k[u]}},error:function(e){console.warn(e)}})},200)),!1}),V(i).on("mouseleave","img[username]",function(e){return clearTimeout(s),n=setTimeout(t,200),!1}),V(i).on("mouseleave","#csdn-userTooltip",function(e){return clearTimeout(n),t(),!1})}}(window,document,jQuery),$(function(){window.csdn.userTooltip()});