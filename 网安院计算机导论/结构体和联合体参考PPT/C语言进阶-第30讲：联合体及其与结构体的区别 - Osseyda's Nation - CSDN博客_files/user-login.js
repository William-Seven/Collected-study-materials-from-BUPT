!function(o,t,c){var s='<svg class="icon warn_icon fl" viewBox="0 0 1024 1024"><path d="M512.874667 938.474667c-235.434667 0-426.261333-190.848-426.261334-426.261334 0-235.434667 190.848-426.261333 426.261334-426.261333s426.261333 190.848 426.261333 426.261333c-0.021333 235.413333-190.848 426.261333-426.261333 426.261334z m0-85.248c188.352 0 341.013333-152.682667 341.013333-341.013334 0-188.352-152.661333-341.013333-341.013333-341.013333S171.861333 323.861333 171.861333 512.213333c0 188.330667 152.661333 341.013333 341.013334 341.013334z m-42.645334-511.530667a42.624 42.624 0 1 1 85.290667 0v204.586667a42.666667 42.666667 0 0 1-85.290667 0v-204.586667zM512.874667 725.333333a42.666667 42.666667 0 1 1 0.042666-85.290666A42.666667 42.666667 0 0 1 512.874667 725.333333z" fill=""></path></svg>',n={timer:"",downTime:60,canClick:!0,phoneNumber:"",curCode:"86",veriCode:"",callback:function(){},isFeed:0,qrUrl:"https://csdnimg.cn/release/passport/history/images/csdnnews.jpg",userMobile:"",userCode:"",version:"2.1.5"},e=function(){!function(e){var s=t.createElement("script");s.type="text/javascript",s.async=!0,s.src="https://g.csdnimg.cn/user-login/"+e+"/js/??toast.script.js";var a=t.getElementsByTagName("script")[0];a.parentNode.insertBefore(s,a),c("<link/>",{rel:"stylesheet",type:"text/css",href:"https://g.csdnimg.cn/user-login/"+e+"/css/??index.css,toast.style.css"}).appendTo("head")}(n.version),c(t).on("click",".test_send",function(){f("internal/weixin/sendVerifyCode","POST",function(e){e.status&&u(e.msg,"success")},{code:"0086",unionid:"",openid:"o9Y-ajsgTwv2MvFz9qNdnKYt1-HE",appid:"gh_d45429d1a396",mobile:c(".mock_phone").val()||"15321575546"})}),c(t).on("click",".close_modal",function(){c(this).parent().parent().parent().remove(),c(".csdn_mask5")&&c(".csdn_mask5").remove(),c(".csdn_mask3")&&c(".csdn_mask3").remove()}),c(t).on("click",".merge_btn",function(){c(".csdn_mask5")&&c(".csdn_mask5").remove(),c(".csdn_mask2")&&c(".csdn_mask2").remove(),c(".csdn_mask3")&&c(".csdn_mask3").remove(),c(".csdn_mask4")&&c(".csdn_mask4").remove(),c(".csdn_mask6")&&c(".csdn_mask6").remove(),o.open("https://i.csdn.net/#/account/merge?isKey=1")}),c(t).on("click","body",function(e){"area"===e.target.id?"block"===c(".pull_list").css("display")?c(".pull_list").css("display","none"):c(".pull_list").css("display","block"):c(".pull_list").css("display","none")}),c(t).on("click",".letter",function(){var e=c(this).text();v(),"海外手机号"===e?(c(".china-code").css("display","none"),c(".sea-code").css("display","block"),c(this).text("国内手机号"),c(".msg_box1").attr("placeholder","请输入短信验证码"),c(".word1").text("获取短信验证码"),c(".phone_box").val(""),c(".msg_box").val(""),c("#area").text("1")):(c(".china-code").css("display","block"),c(".sea-code").css("display","none"),c(this).text("海外手机号"),c(".phone_box").val(""),c(".msg_box").val(""),c("#area").text("86"),c(".msg_box1").attr("placeholder","请输入语音验证码"),c(".word1").text("获取语音验证码"))}),c(t).on("click",".pull_list",function(e){if("em"===e.target.tagName.toLowerCase()||"li"===e.target.tagName.toLowerCase()||"span"===e.target.tagName.toLowerCase()){var s=e.target.dataset.text||"";c(".area").text(s)}}),c(t).on("click",".word",function(e){var s=c(".msg_box1").attr("placeholder").indexOf("短信"),a=c(".tips").text().indexOf("校验");-1<a?(m(s),-1<s?-1<a?k():C():-1<a?g():w()):_()&&(m(s),-1<s?-1<a?k():C():-1<a?g():w())}),c(t).on("click",".confirm",function(e){var s=c(".msg_box1").attr("placeholder").indexOf("短信"),a=c(".tips").text().indexOf("校验");-1<a?b(1)&&(-1<s?-1<a?h():y():-1<a?x():O()):_()&&b(1)&&(-1<s?-1<a?h():y():-1<a?x():O())}),c(t).on("click",".confirmBind",function(e){_()&&b()&&O()}),c(t).on("click",".cur_word1",function(e){r("4"),c(".csdn_mask5")&&c(".csdn_mask5").remove(),c(".letter1").css("display","none"),c(".china-code").css("display","none"),c(".area").text("1"),c(".msg_box1").attr("placeholder","请输入短信验证码"),c(".word1").text("获取短信验证码")}),c(t).on("click",".bot_btn",function(e){!function(){var e=c(".msg_box").val()||"";n.veriCode=e;return!(!e||!/^\d{6}$/.test(e))||(u("请输入6位验证码","error"),!1)}()||f("riskControl/weixin/checkCodeAndBind","POST",function(e){e.status&&404!==e.status?(n.callback&&n.callback(e),n.callback||(a.result=e),c(".csdn_mask4").remove(),c(".csdn_mask5").remove(),c(".csdn_mask6").remove(),v()):e.code&&"1028"===e.code&&d()},{mobile:n.phoneNumber||"",code:n.curCode?"00"+n.curCode:"",verifyCode:n.veriCode||""})}),c(t).on("click",".to_bind",function(e){if(c(".csdn_mask0").remove(),n.isFeed)r();else{var s=o.navigator.userAgent.toLowerCase(),a=o.navigator.userAgent.indexOf("CSDN");/Android|webOS| iPhone | iPad | iPod |BlackBerry|opera mini|opera mobile|appleWebkit.*mobile|mobile/i.test(o.navigator.userAgent)||"micromessenger"===s.match(/MicroMessenger/i)||-1<a?(r("4"),c(".letter1").css("display","none"),c(".msg_box1").attr("placeholder","请输入短信验证码"),c(".word1").text("获取短信验证码")):p()}}),c(t).on("click",".change_phone",function(e){c(".csdn_mask2").remove(),c(".msg_box")&&c(".msg_box").val(""),c(".mock_phone")&&c(".mock_phone").val("")}),c(t).on("click",".changeBtn",function(e){n.curCode="86",T(function(){c(".csdn_mask4").remove(),N(0),n.isFeed=0})})},a={loadAjax:function(e){n.callback=e||"",f("check/userstatus","POST",function(e){if(e.status)if(e.detail)switch(e.detail){case"deleted":!function(){i("6");var e=c("<div class='csdn_modal account_modal'><div class='top_content'>"+s+"<span class='tips fl'>此账号处于冻结状态</span><span class='close_modal fr'>×</span></div><a class='concat' href='https://url.cn/5epoHIm?_type=wpa&qidian=true' target='_blank'>联系客服</a></div>");c(".csdn_mask6").append(e)}();break;case"riskControl":f("riskControl/getUserMobile","POST",function(e){e.status&&(e.data.mobile&&(n.userMobile=e.data.mobile),e.data.code&&(n.userCode=e.data.code),n.userCode?"0086"===n.userCode?l():function(){i("6");var e=c("<div class='csdn_modal bind_modal bind_modal1'><div class='top_content'><span class='tips fl'></span><span class='close_modal fr'>×</span></div><div class='bot_content'><div class='bot'><input type='text' placeholder='请输入短信验证码' class='msg_box msg_box1' maxLength='6'/><span class='word word1'>获取短信验证码</span></div><div class='bt_group confirm'>确定</div></div></div>");c(".csdn_mask6").append(e);var s="账号异常，请通过"+n.userMobile+"获取验证码校验";c(".tips").text(s)}():l())});break;case"activateAndRisk":N(1),n.isFeed=1;break;case"activate":T(function(){N(0),n.isFeed=0});break;default:return n.callback||(a.result=e),!0}else n.callback&&n.callback(e),n.callback||(a.result=e);else o.location.href="https://passport.csdn.net/"},{username:S("UserName")||""})},result:{}};function i(e){var s=t.createElement("div");s.className="csdn_mask"+e,t.body.appendChild(s)}function d(){i("2");var e=c("<div class='csdn_modal assess_modal'><div class='top_content'>"+s+"<span class='tips fl'>此手机号已绑定CSDN帐号</span><span class='close_modal fr'>×</span></div><div class='bot_content'><div class='merge_btn fl'>合并账号</div><div class='change_phone fl'>更换手机号</div></div></div>");c(".csdn_mask2").append(e)}function r(e){i("4");var s=c("<div class='csdn_modal bind_modal'><div class='top_content'><span class='tips fl'>此操作需要绑定手机号</span><span class='close_modal fr'>×</span></div><div class='mid_cont'><div class='seas'>海外手机号</div><div class='changeBtn fl'>国内手机号</div></div><div class='bot_content'><div class='top_con'><ul  class='pull_list'>\n<li data-text='86' class='item china-code'><span data-text='86'>+ 86</span> <em data-text='86'>中国</em></li>\n <li data-text='1' class='item sea-code'><span data-text='1'>+ 1</span> <em data-text='1'>美国</em></li> \n<li data-text='1' class='item sea-code'><span data-text='1'>+ 1</span> <em data-text='1'>加拿大</em></li>\n <li data-text='852' class='item sea-code'><span data-text='852'>+ 852</span> <em data-text='852'>中国香港</em></li>\n <li data-text='886' class='item sea-code'><span data-text='886'>+ 886</span> <em data-text='886'>中国台湾</em></li>\n <li data-text='81' class='item sea-code'><span data-text='81'>+ 81</span> <em data-text='81'>日本</em></li>\n <li data-text='65' class='item sea-code'><span data-text='65'>+ 65</span> <em data-text='65'>新加坡</em></li>\n</ul><span class='area' id='area'>86</span><input type='text' placeholder='请输入手机号' class='phone_box' /></div><div class='bot'><input type='text' placeholder='请输入语音验证码' class='msg_box msg_box1' maxLength='6'/><span class='word word1'>获取语音验证码</span></div><p class='letter letter1'>海外手机号</p><div class='bt_group '><div class='fr confirm'>确定</div></div></div></div>");c(".csdn_mask4").append(s);var a=o.navigator.userAgent.toLowerCase(),t=o.navigator.userAgent.indexOf("CSDN"),n=!1;(/Android|webOS| iPhone | iPad | iPod |BlackBerry|opera mini|opera mobile|appleWebkit.*mobile|mobile/i.test(o.navigator.userAgent)||"micromessenger"===a.match(/MicroMessenger/i)||-1<t)&&(n=!0),c(".letter1").text()&&-1<c(".letter1").text().indexOf("海外")&&"4"!==e&&c(".sea-code").css("display","none"),"4"===e?(n||c(".changeBtn").css("display","block"),c(".seas").css("display","block"),c(".bind_modal").addClass("scan_modal1")):(c(".bind_modal").removeClass("scan_modal1"),c(".changeBtn").css("display","none"),c(".seas").css("display","none"))}function l(){i("6");var e=c("<div class='csdn_modal bind_modal bind_modal1'><div class='top_content'><span class='tips fl'></span><span class='close_modal fr'>×</span></div><div class='bot_content'><div class='bot'><input type='text' placeholder='请输入语音验证码' class='msg_box msg_box1' maxLength='6'/><span class='word word1'>获取语音验证码</span></div><div class='bt_group confirm'>确定</div></div></div>");c(".csdn_mask6").append(e);var s="账号异常，请通过"+n.userMobile+"获取验证码校验";c(".tips").text(s)}function p(){i("5");var e=c("<div class='csdn_modal scan_modal'><div class='top_content'><span class='tips fl'>此操作需要绑定手机号</span><span class='close_modal fr'>×</span></div><div class='mid_con'><span class='cur_word fl'>大陆手机号</span><span class='cur_word1 fr'>海外手机号</span></div><div class='message'>1.请扫码关注下方任意公众号，发送手机号给该公众号，获取短信验证码</div><div class='pic_box'><img class='code_pic' src=''/><p class='title'>CSDN公众号</p></div><div class='message message1'>2.请填写短信验证码</div><input type='text' placeholder='请输入短信验证码' class='msg_box' maxLength='6'/><div class='process-text'><label><input disabled='disabled' type='checkbox' checked='checked'></label>\n                    我已仔细阅读并接受  <a href='https://passport.csdn.net/service' target='_blank'><em>CSDN用户服务条款</em></a></div><div class='bot_btn'>下一步</div></div>");c(".csdn_mask5").append(e),c(".code_pic").attr("src",n.qrUrl)}function m(s){n.canClick&&(n.canClick=!1,c(".word").text(n.downTime+"s"),n.timer=o.setInterval(function(){if(n.downTime--,c(".word").text(n.downTime+"s"),n.downTime<=0){o.clearInterval(n.timer),n.timer=null;var e=-1<s?"获取短信验证码":"获取语音验证码";c(".word").text(e),n.downTime=60,n.canClick=!0}},1e3))}function v(){o.clearInterval(n.timer),n.timer=null,-1<(c(".msg_box1").attr("placeholder")&&c(".msg_box1").attr("placeholder").indexOf("短信")||0)?c(".word").text("获取短信验证码"):c(".word").text("获取语音验证码"),n.downTime=60,n.canClick=!0}function u(e,s){var a=o.navigator.userAgent.toLowerCase(),t=o.navigator.userAgent.indexOf("CSDN"),n="toast-top-center";(/Android|webOS| iPhone | iPad | iPod |BlackBerry|opera mini|opera mobile|appleWebkit.*mobile|mobile/i.test(o.navigator.userAgent)||"micromessenger"===a.match(/MicroMessenger/i)||-1<t)&&(n="toast-top-right"),o.csdn.userLogin.Toast("提示",e,s,{stack:!0,has_icon:!1,has_close_btn:!0,fullscreen:!1,timeout:3e3,sticky:!1,rtl:!1,position_class:n})}function _(){try{n.phoneNumber=c(".phone_box")&&c(".phone_box").val().replace(/(^\s*)|(\s*$)/g,"")||""}catch(e){n.phoneNumber=""}return n.phoneNumber?(n.curCode=c(".area").text()||"","86"!==n.curCode&&"1"!==n.curCode||(!!("86"===n.curCode?/^[1][3,4,5,6,7,8,9][0-9]{9}$/:/^((\d{10})|(0?(7|8|9)0\d{8})|([569]\d{7})|((09|9)\d{8})|([89]\d{7})|([1][3,4,5,6,7,8,9][0-9]{9}))$/).test(n.phoneNumber)||(u("请输入正确的手机号码","error"),!1))):(u("手机号不能为空","error"),!1)}function b(e){try{n.veriCode=e?c(".msg_box1").val().replace(/(^\s*)|(\s*$)/g,""):c(".msg_box").val().replace(/(^\s*)|(\s*$)/g,"")}catch(e){n.veriCode=""}return n.veriCode?!!/^\d{6}$/.test(n.veriCode)||(u("请输入6位数字验证码","error"),!1):(u("验证码不能为空","error"),!1)}function f(e,s,a,t){var n=e&&-1<e.indexOf("chooseOfficeAccount")?"https://passport.csdn.net/v1/register/":"https://passport.csdn.net/v1/api/";c.ajax({url:n+e,type:s,dataType:"json",contentType:"application/json",async:!1,xhrFields:{withCredentials:!0},data:t?JSON.stringify(t):"",success:function(e){console.log("---------success",e),a(e)},error:function(e){if(console.log("---------error",e),v(),e&&e.responseText){var s=JSON.parse(e.responseText);s.message=s.message||"接口异常",u(s.message,"error"),s.code&&"1021"===s.code&&(o.location.href="https://passport.csdn.net"),a(s)}else a({})}})}function k(){f("riskControl/sendVerifyCode","POST",function(e){e.code&&"1021"===e.code&&(o.location.href="https://passport.csdn.net")})}function g(){f("riskControl/sendVoiceVerifyCode","POST",function(e){e.code&&"1021"===e.code&&(o.location.href="https://passport.csdn.net")})}function h(){f("riskControl/checkVerifyCode","POST",function(e){e.status&&404!==e.status&&(c(".csdn_mask4").remove(),c(".csdn_mask5").remove(),c(".csdn_mask6").remove(),v(),n.callback&&n.callback(e),n.callback||(a.result=e))},{verifyCode:n.veriCode||""})}function x(){f("riskControl/checkVoiceVerifyCode","POST",function(e){e.status&&404!==e.status&&(c(".csdn_mask4").remove(),c(".csdn_mask5").remove(),c(".csdn_mask6").remove(),n.callback&&n.callback(e),n.callback||(a.result=e),v())},{verifyCode:n.veriCode||""})}function C(){f("riskControl/sendBindVerifyCode","POST",function(e){},{mobile:n.phoneNumber||"",code:n.curCode?"00"+n.curCode:""})}function y(){f("riskControl/checkBindVerifyCode","POST",function(e){e.status&&404!==e.status?(n.callback&&n.callback(e),n.callback||(a.result=e),c(".csdn_mask4").remove(),c(".csdn_mask5").remove(),c(".csdn_mask6").remove(),v()):e.code&&"1028"===e.code&&d()},{mobile:n.phoneNumber||"",code:n.curCode?"00"+n.curCode:"",verifyCode:n.veriCode||""})}function w(){f("riskControl/sendBindVoiceCode","POST",function(e){},{mobile:n.phoneNumber||""})}function O(){f("riskControl/checkVoiceCodeAndBind","POST",function(e){e.status&&404!==e.status?(n.callback&&n.callback(e),n.callback||(a.result=e),c(".csdn_mask4").remove(),c(".csdn_mask5").remove(),c(".csdn_mask6").remove(),v()):e.code&&"1028"===e.code&&d()},{mobile:n.phoneNumber||"",code:n.curCode?"00"+n.curCode:"",verifyCode:n.veriCode||"",uaToken:"",webUmidToken:"",deviceToken:""})}function T(a){f("chooseOfficeAccount?num=1","GET",function(e){if(e&&e.status){var s=e.data&&e.data.items.length&&e.data.items[0].officialAccountsImgUrl||"https://csdnimg.cn/release/passport/history/images/jingpinke.jpg";n.qrUrl=s}else n.qrUrl="https://csdnimg.cn/release/passport/history/images/jingpinke.jpg";a&&a(n)})}function N(e){if(e)r();else{var s=o.navigator.userAgent.toLowerCase(),a=o.navigator.userAgent.indexOf("CSDN");/Android|webOS| iPhone | iPad | iPod |BlackBerry|opera mini|opera mobile|appleWebkit.*mobile|mobile/i.test(o.navigator.userAgent)||"micromessenger"===s.match(/MicroMessenger/i)||-1<a?(r("4"),c(".letter1").css("display","none"),c(".msg_box1").attr("placeholder","请输入短信验证码"),c(".word1").text("获取短信验证码"),c(".seas").css("display","none")):p()}}var S=function(e){var s,a=new RegExp("(^| )"+e+"=([^;]*)(;|$)");return(s=t.cookie.match(a))?unescape(s[2]):""};void 0===o.csdn&&(o.csdn={}),csdn.userLogin?console.warn("user-login组件重复，请检查！"):(e(),o.csdn.userLogin=a)}(window,document,jQuery);