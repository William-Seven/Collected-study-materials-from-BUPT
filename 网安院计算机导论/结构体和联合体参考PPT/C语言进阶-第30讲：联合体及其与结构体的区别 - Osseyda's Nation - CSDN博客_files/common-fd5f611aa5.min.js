function fixedSidebarInButton(){var t="left",i=$("main");if(window.location.pathname.indexOf("/column/info/")>-1){i=$("#column");var t="left"}window.csdn.fixedSidebar({targetBox:$(".blog_container_aside"),mainBox:i,sidebar:$(".blog_container_aside"),direction:t,position:"fixed",bottom:0,zIndex:99,sidebarRightMargin:8,sidebarLeftMargin:15})}function showInit(){$("<div id='st_mask' onclick='closeMask()'></div>").appendTo("body").css({width:"100%",height:"100%",background:"rgba(0,0,0,.4)",position:"fixed",left:"0",top:"0",display:"none","z-index":"1"}),$("<div id='st_confirmBox'></div>").appendTo("body").css({width:"100%",position:"fixed",left:"0",top:"34%","text-align":"center",display:"none","z-index":"2"}),$("<div id='st_confirm'></div>").appendTo("#st_confirmBox").css({width:"80%",margin:"0 auto",background:"#fff","border-radius":"3px",overflow:"hidden","padding-top":"20px","text-align":"center"}),$("<span id='st_confirm_text'></span>").appendTo("#st_confirm").css({background:"#fff",overflow:"hidden","padding-top":"20px","text-align":"center",display:"block",padding:"15px 8px 30px"}),$("<span class='st_confirm_btn cancel'></span>").appendTo("#st_confirm").css({background:"#fff",color:"#8d8d8d",padding:"8px","text-align":"center",display:"block",width:"50%",margin:"0 auto","float":"left","box-sizing":"border-box","border-top":"1px solid #cfcfcf",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}),$("<span class='st_confirm_btn success'></span>").appendTo("#st_confirm").css({background:"#1b79f8",color:"#fff",padding:"8px","text-align":"center",display:"block",width:"50%",margin:"0 auto","float":"left","box-sizing":"border-box","border-top":"1px solid #1b79f8",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}),$("<div></div>").appendTo("#st_confirm").css({clear:"both",display:"block"}),$("<div id='st_alertBox'></div>").appendTo("body").css({width:"100%",position:"fixed",left:"0",top:"34%","text-align":"center",display:"none","z-index":"2"}),$("<div id='st_alert'></div>").appendTo("#st_alertBox").css({width:"80%",margin:"0 auto",background:"#fff","border-radius":"2px",overflow:"hidden","padding-top":"20px","text-align":"center"}),$("<span id='st_alert_text'></span>").appendTo("#st_alert").css({background:"#fff",overflow:"hidden","padding-top":"20px","text-align":"center",display:"block",padding:"15px 8px 30px"}),$("<span id='st_alert_btn' onclick='closeMask()'></span>").appendTo("#st_alert").css({background:"#1b79f8",color:"#fff",padding:"8px","text-align":"center",display:"block",width:"72%",margin:"0 auto","margin-bottom":"20px","border-radius":"2px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap"}),$("<div id='st_toastBox'></div>").appendTo("body").css({width:"100%",position:"fixed",left:"0",bottom:"10%","text-align":"center",display:"none"}),$("<span id='st_toastContent'></span>").appendTo("#st_toastBox").css({color:"#fff",background:"rgba(0,0,0,.8)",padding:"8px 24px","border-radius":"4px","max-width":"80%",display:"inline-block","font-size":"16px"})}function showToast(t){if(!t.text)return!1;clearTimeout(st_timer),$("#st_toastBox").hide();var i=t.text,s=parseInt(t.time?t.time:2300),e=t.speed?t.speed:"normal",n=t.bottom?t.bottom:"10%";if(t.zindex){var o=parseInt(t.zindex);$("#st_mask").css({"z-index":o-1}),$("#st_toastBox").css({"z-index":o})}else $("#st_mask").css({"z-index":1}),$("#st_toastBox").css({"z-index":2});$("#st_toastBox").css({bottom:n}),$("#st_toastContent").text(i),$("#st_mask").fadeIn(e,function(){$("#st_toastBox").fadeIn(e)}),st_timer=setTimeout(function(){$("#st_toastBox").fadeOut(function(){$("#st_mask").fadeOut()})},s)}function showAlert(t){if(!t.text)return!1;var i=t.text,s=t.bgColor?t.bgColor:"#1b79f8",e=t.color?t.color:"#fff",n=t.btnText?t.btnText:"确定",o=t.top?t.top:"34%";if(t.zindex){var a=parseInt(t.zindex);$("#st_mask").css({"z-index":a-1}),$("#st_alertBox").css({"z-index":a})}else $("#st_mask").css({"z-index":1}),$("#st_alertBox").css({"z-index":2});$("#st_alert_text").text(i),$("#st_alert_btn").css({background:s}),$("#st_alert_btn").css({color:e}),$("#st_alert_btn").text(n),$("#st_alertBox").css({top:o}),$("#st_mask,#st_alertBox").show(),t.success&&$("#st_alert_btn").off("click").on("click",function(){t.success()})}function showConfirm(t){if(!t.text)return!1;var i=t.text,s=t.rightText?t.rightText:"确定",e=t.rightBgColor?t.rightBgColor:"#1b79f8",n=t.rightColor?t.rightColor:"#fff",o=t.leftText?t.leftText:"取消",a=t.top?t.top:"34%";if(t.zindex){var d=parseInt(t.zindex);$("#st_mask").css({"z-index":d-1}),$("#st_confirmBox").css({"z-index":d})}else $("#st_mask").css({"z-index":1}),$("#st_confirmBox").css({"z-index":2});$("#st_confirm_text").text(i),$(".st_confirm_btn.cancel").text(o),$(".st_confirm_btn.success").text(s),$(".st_confirm_btn.success").css({background:e,color:n,"border-top":"1px solid "+e}),$("#st_confirmBox").css({top:a}),$("#st_mask,#st_confirmBox").show(),t.cancel?$(".st_confirm_btn.cancel").off("click").on("click",function(){closeMask(),t.cancel()}):$(".st_confirm_btn.cancel").off("click").on("click",function(){closeMask()}),t.success?$(".st_confirm_btn.success").off("click").on("click",function(){closeMask(),t.success()}):$(".st_confirm_btn.success").off("click").on("click",function(){closeMask()})}function closeMask(){$("#st_mask,#st_alertBox,#st_confirmBox").hide()}function getCookie(t){for(var i=document.cookie.split("; "),s=0;s<i.length;s++){var e=i[s].split("=");if(t==e[0])return e[1]}return null}$(function(){var t=$("div.box-box-default"),i=$("div.box-box-large");boxAways=$("div.box-box-aways"),t.find("a.btn-remove").click(function(){t.remove()}),i.find("a.btn-remove").click(function(){i.remove()}),boxAways.find("a.btn-remove").click(function(){boxAways.remove()})}),window.addLoadEvent=window.addLoadEvent?window.addLoadEvent:function(t){var i=window.onload;"function"!=typeof window.onload?window.onload=t:window.onload=function(){i(),t()}},$(function(){function t(){}function i(t){$(t).text("点开这里查看关注").fadeIn(),setTimeout(function(){$(t).fadeOut()},3e3)}t.prototype.animation=function(){if(!currentUserName)return!1;var t=$(this).offset(),s=$(".loginCenter").offset().top,e=$(".loginCenter").offset().left+20,n=t.left+80,o=t.top+20,a=$("#pointDivs .point-pre").first().removeClass("point-pre").css({left:n+"px",top:o+"px"}),d=a.find(".point-inner");setTimeout(function(){a[0].style.webkitTransform="translate3d(0,"+(s-o)+"px,0)",d[0].style.webkitTransform="translate3d("+(e-n)+"px,0,0)",setTimeout(function(){a.removeAttr("style").addClass("point-pre"),d.removeAttr("style"),i(".guo_tip_box")},800)},1)},t.prototype.animationInit=function(){for(var t=$('<div id="pointDivs"></div>').appendTo("body"),i=0;i<5;i++)$('<div class="point-outer point-pre"><div class="point-inner"/></div></div>').appendTo(t)},window.CSDNAnimation=t}),$(function(){function t(){return window.devicePixelRatio>1}$(document).on("mouseenter",".badge .icon-badge",function(t){var i=$(this).find(".grade-detail-box"),s=104;i.css({top:$(this).position().top-s-(i.outerHeight()-s)})}),function(){if(t()){var i=$(".user-years");i.length>0&&(i=i.attr("src").split("/")[$(".user-years").attr("src").split("/").length-1],$(".user-years").attr("src","https://g.csdnimg.cn/static/user-reg-year/2x/"+i))}}()}),(isCorporate||"undefined"==typeof articleId||$(window).width()>0)&&$(document).ready(fixedSidebarInButton),window.leftFixedSide?window.leftFixedSide:window.leftFixedSide={},window.leftFixedSide.fixedSidebarInButton=fixedSidebarInButton,$(function(){function t(){var t=document.cookie.match(new RegExp("(^| )UserName=([^;]*)(;|$)"));return t?t[2]:""}function i(t){$("#fan").text().indexOf("+")<0?$("#fan").text(parseInt($("#fan").text())+t):$("#fanBox").attr("title",parseInt($("#fanBox").attr("title"))+t);var i=$(".fans_read_more");i.length>0&&i.trigger("click")}function s(t){var i=t.hasClass("attented");i?n(t):e(t)}function e(t){var s="https://me.csdn.net/api/relation/create?source=blog";$.ajax({type:"POST",url:s,contentType:"application/json; charset=utf-8",data:JSON.stringify({username:username}),xhrFields:{withCredentials:!0},success:function(s){s="object"!=typeof s?JSON.parse(s):s,200===s.code&&(t.addClass("attented").text("已关注").removeClass("btn-red-hollow").addClass("btn-gray-hollow attented"),i(1))},error:function(t){t="object"!=typeof t.responseText?JSON.parse(t.responseText):t.responseText,400102==t.code?window.csdn.loginBox.show():alert(t.message)}})}function n(t){var s="https://me.csdn.net/api/relation/destroy?source=blog";$.ajax({type:"POST",url:s,contentType:"application/json; charset=utf-8",data:JSON.stringify({username:username}),xhrFields:{withCredentials:!0},success:function(s){200==s.code?(t.text("关注").addClass("btn-red-hollow").removeClass("btn-gray-hollow attented"),i(-1)):console.error(s.msg)}})}var o=new window.CSDNAnimation;o.animationInit(),$("#btnAttent").click(function(t){s($(this))}),t()}),function(){function t(t){var i=document.createElement("div");void 0!=i.textContent?i.textContent=t:i.innerText=t;var s=i.innerHTML;return i=null,s}function i(t){var i="";return 0==t.length?"":(i=t.replace(/</g,"&lt;"),i=i.replace(/>/g,"&gt;"))}window.csdn?window.csdn:window.csdn={},window.csdn.htmlEncode_inner=t,window.csdn.htmlEncode_Escape=i}(),$(function(){var t=document.createElement("script");t.src="https://g.csdnimg.cn/side-toolbar/2.0/side-toolbar.js",document.body.appendChild(t)}),function(t,i){function s(t,s,e,n){i.post(t,s,e,n)}window.csdn?window.csdn:window.csdn={},window.csdn.post=s}(window,jQuery);var st_timer=null;$(function(){showInit()}),$(function(){function t(t,i,s){$.ajax({url:t,type:"POST",data:i,xhrFields:{withCredentials:!0},success:function(t){if(e.skinBoxshadow.html(""),t.status){var i='<div class="skin-success skin-tip skin-massage">          <svg t="1513153231313" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4182" id="mx_n_1513153231314" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M512 0C228.8 0 0 228.8 0 512s228.8 512 512 512 512-228.8 512-512S795.2 0 512 0z m244.8 392L467.2 691.2c-8 9.6-24 12.8-36.8 12.8-12.8 0-27.2-3.2-36.8-12.8L267.2 560c-16-16-16-43.2 0-59.2s41.6-16 57.6 0l105.6 110.4 267.2-278.4c16-16 41.6-16 57.6 0s16 43.2 1.6 59.2z" p-id="4183" fill=""></path></svg>          <span>'+t.error+"</span>          </div>";e.skinBoxshadow.append(i),e.skinBoxshadow.fadeIn(200),setTimeout(function(){e.skinBoxshadow.fadeOut(200),e.skinTipbox.slideUp(200),""!==s&&(window.location.href=s.window_url)},1e3)}else if(2===t.data.type){var n='<div class="skin-vip skin-adopt skin-massage">            <p class="skin-title">            <svg t="1513590447537" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9504" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M512 0C228.8 0 0 228.8 0 512s228.8 512 512 512 512-228.8 512-512S795.2 0 512 0z m0 832c-35.2 0-64-28.8-64-64s28.8-64 64-64 64 28.8 64 64-28.8 64-64 64z m64-320c0 35.2-28.8 64-64 64s-64-28.8-64-64V256c0-35.2 28.8-64 64-64s64 28.8 64 64v256z" p-id="9505" fill=""></path></svg>            <span>你还不是VIP会员</span></p>            <p class="skin-text">本皮肤为VIP用户可用哦，请您开通VIP会员后再试！</p>            <a href="https://mall.csdn.net/vip?utm_source=skinTemplateVip" class="adopt-vip" target="_blank">                <img class="isvip" src="'+blogUrl+'static_files/static_blog/images/crown.png" >                <span>开通VIP会员</span>            </a>            <div class="skin-bt-close"><svg t="1567152543821" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10924" width="200" height="200"><path d="M512 438.378667L806.506667 143.893333a52.032 52.032 0 1 1 73.6 73.621334L585.621333 512l294.485334 294.485333a52.074667 52.074667 0 0 1-73.6 73.642667L512 585.621333 217.514667 880.128a52.053333 52.053333 0 1 1-73.621334-73.642667L438.378667 512 143.893333 217.514667a52.053333 52.053333 0 1 1 73.621334-73.621334L512 438.378667z" fill="" p-id="10925"></path></svg></div>          </div>';e.skinBoxshadow.append(n),e.skinBoxshadow.fadeIn(200),$(".skin-bt-close").on("click",function(){e.skinBoxshadow.fadeOut(200)})}else if(3===t.data.type){var o='<div class="grade-vip skin-adopt skin-massage">            <p class="skin-title">            <svg t="1513590447537" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9504" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M512 0C228.8 0 0 228.8 0 512s228.8 512 512 512 512-228.8 512-512S795.2 0 512 0z m0 832c-35.2 0-64-28.8-64-64s28.8-64 64-64 64 28.8 64 64-28.8 64-64 64z m64-320c0 35.2-28.8 64-64 64s-64-28.8-64-64V256c0-35.2 28.8-64 64-64s64 28.8 64 64v256z" p-id="9505" fill=""></path></svg>            <span>'+t.error+'</span>            <p class="skin-text">开通VIP会员，即可专享所有皮肤哦～！</p>            <a href="https://mall.csdn.net/vip?utm_source=skinTemplateVip" class="adopt-vip" target="_blank">                <img class="isvip" src="'+blogUrl+'static_files/static_blog/images/crown.png" >                <span>开通VIP会员</span>            </a>            <div class="skin-bt-close"><svg t="1567152543821" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10924" width="200" height="200"><path d="M512 438.378667L806.506667 143.893333a52.032 52.032 0 1 1 73.6 73.621334L585.621333 512l294.485334 294.485333a52.074667 52.074667 0 0 1-73.6 73.642667L512 585.621333 217.514667 880.128a52.053333 52.053333 0 1 1-73.621334-73.642667L438.378667 512 143.893333 217.514667a52.053333 52.053333 0 1 1 73.621334-73.621334L512 438.378667z" fill="" p-id="10925"></path></svg></div>          </div>';e.skinBoxshadow.append(o),e.skinBoxshadow.fadeIn(200),$(".skin-bt-close").on("click",function(){e.skinBoxshadow.fadeOut(200)})}else{var a='<div class="skin-error skin-tip skin-massage">            <svg t="1513590447537" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9504" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M512 0C228.8 0 0 228.8 0 512s228.8 512 512 512 512-228.8 512-512S795.2 0 512 0z m0 832c-35.2 0-64-28.8-64-64s28.8-64 64-64 64 28.8 64 64-28.8 64-64 64z m64-320c0 35.2-28.8 64-64 64s-64-28.8-64-64V256c0-35.2 28.8-64 64-64s64 28.8 64 64v256z" p-id="9505" fill=""></path></svg>            <span>'+t.error+"</span>            </div>";e.skinBoxshadow.append(a),e.skinBoxshadow.fadeIn(200),setTimeout(function(){e.skinBoxshadow.fadeOut(200)},1e3)}},error:function(t){e.skinBoxshadow.html("");var i='<div class="skin-error skin-tip skin-massage">        <svg t="1513590447537" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9504" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M512 0C228.8 0 0 228.8 0 512s228.8 512 512 512 512-228.8 512-512S795.2 0 512 0z m0 832c-35.2 0-64-28.8-64-64s28.8-64 64-64 64 28.8 64 64-28.8 64-64 64z m64-320c0 35.2-28.8 64-64 64s-64-28.8-64-64V256c0-35.2 28.8-64 64-64s64 28.8 64 64v256z" p-id="9505" fill=""></path></svg>        <span>保存失败！请重新保存</span>        </div>';e.skinBoxshadow.append(i),e.skinBoxshadow.fadeIn(200),setTimeout(function(){e.skinBoxshadow.fadeOut(200)},1e3)}})}function i(){var t,i,s=window.location.href;return s.indexOf("?assign_skin_id")!=-1?(i=s.split("?")[0],t=s.split("?")[1].split("=")[1]):i=s,t=parseInt(t)?parseInt(t):"",{window_url:i,skin_id:t}}function s(){function t(){c={img_title:e.userSkin.find("#uploadHeaderimg").attr("value"),img_back:e.userSkin.find("#uploadBgimg").attr("value"),img_column:e.userSkin.find("#uploadColumnimg").attr("value"),color_title:e.userSkin.find("#topicColor").val(),color_title_hover:e.userSkin.find("#topicHoverColor").val(),color_sub_title:e.userSkin.find("#subTopicColor").val()};var t="^#([0-9a-fA-F]{6}|[0-9a-fA-F]{3})$",i=new RegExp(t);return""===c.img_title?(o("头图必传",!1),!1):!(""!==c.color_title&&!i.test(c.color_title))||(o("请填写正确的颜色值",!1),!1)}function s(){e.userSkin.find("input").val(""),$("#uploadHeaderimg").value="",$("#uploadBgimg").value="",$("#uploadColumnimg").value="",e.userSkin.find(".upload-icon").show(),e.userSkin.find(".success-upload-icon").hide(),e.userSkin.find(".tip-massage").html("点击选择上传的图片"),e.userSkin.fadeOut(200)}function n(t,i,s){var n=blogUrl+"pheapi/skin/"+t;$.ajax({url:n,type:"POST",data:i,xhrFields:{withCredentials:!0},success:function(i){setTimeout(function(){if(!i.status)if(null===i.data&&""!==i.content)o(i.content);else if(1===i.data.type)o(i.error,!0);else{var n='<div class="skin-vip skin-adopt skin-massage">                        <p class="skin-title">                        <svg t="1513590447537" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9504" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M512 0C228.8 0 0 228.8 0 512s228.8 512 512 512 512-228.8 512-512S795.2 0 512 0z m0 832c-35.2 0-64-28.8-64-64s28.8-64 64-64 64 28.8 64 64-28.8 64-64 64z m64-320c0 35.2-28.8 64-64 64s-64-28.8-64-64V256c0-35.2 28.8-64 64-64s64 28.8 64 64v256z" p-id="9505" fill=""></path></svg>                        <span>你还不是VIP会员</span></p>                        <p class="skin-text">本功能为VIP用户可用哦，请您开通VIP会员后再试！</p>                        <a href="https://mall.csdn.net/vip?utm_source=skinTemplateVip" class="adopt-vip" target="_blank">                            <img class="isvip" src="'+blogUrl+'static_files/static_blog/images/crown.png" >                            <span>开通VIP会员</span>                        </a>                        <div class="skin-bt-close"><svg t="1567152543821" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="10924" width="200" height="200"><path d="M512 438.378667L806.506667 143.893333a52.032 52.032 0 1 1 73.6 73.621334L585.621333 512l294.485334 294.485333a52.074667 52.074667 0 0 1-73.6 73.642667L512 585.621333 217.514667 880.128a52.053333 52.053333 0 1 1-73.621334-73.642667L438.378667 512 143.893333 217.514667a52.053333 52.053333 0 1 1 73.621334-73.621334L512 438.378667z" fill="" p-id="10925"></path></svg></div>                      </div>';e.skinBoxshadow.append(n),e.skinBoxshadow.fadeIn(200),$(".skin-bt-close").on("click",function(){e.skinBoxshadow.fadeOut(200),e.skinBoxshadow.html("")})}"previewSkin"===t?!!s&&s(i.status,i.data?i.data:"操作成功"):!!s&&s(i.status,i.error?i.error:"操作成功")},2e3)},error:function(t){o("系统错误，请重新上传",!1)}})}function o(t,i){e.skinBoxshadow.html("");var s="";s=i?'<div class="skin-success skin-tip skin-massage">        <svg t="1513153231313" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="4182" id="mx_n_1513153231314" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M512 0C228.8 0 0 228.8 0 512s228.8 512 512 512 512-228.8 512-512S795.2 0 512 0z m244.8 392L467.2 691.2c-8 9.6-24 12.8-36.8 12.8-12.8 0-27.2-3.2-36.8-12.8L267.2 560c-16-16-16-43.2 0-59.2s41.6-16 57.6 0l105.6 110.4 267.2-278.4c16-16 41.6-16 57.6 0s16 43.2 1.6 59.2z" p-id="4183" fill=""></path></svg>        <span>'+t+"</span>        </div>":'<div class="skin-error skin-tip skin-massage">        <svg t="1513590447537" class="icon" style="" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="9504" xmlns:xlink="http://www.w3.org/1999/xlink" width="16" height="16"><defs><style type="text/css"></style></defs><path d="M512 0C228.8 0 0 228.8 0 512s228.8 512 512 512 512-228.8 512-512S795.2 0 512 0z m0 832c-35.2 0-64-28.8-64-64s28.8-64 64-64 64 28.8 64 64-28.8 64-64 64z m64-320c0 35.2-28.8 64-64 64s-64-28.8-64-64V256c0-35.2 28.8-64 64-64s64 28.8 64 64v256z" p-id="9505" fill=""></path></svg>        <span>'+t+"</span>        </div>",e.skinBoxshadow.append(s),e.skinBoxshadow.fadeIn(200),setTimeout(function(){e.skinBoxshadow.fadeOut(200)},1e3)}function a(t){var i=null;return void 0!=window.createObjectURL?i=window.createObjectURL(t):void 0!=window.URL?i=window.URL.createObjectURL(t):void 0!=window.webkitURL&&(i=window.webkitURL.createObjectURL(t)),i}function d(t){e.cropBox.find("#cropImg").cropper({aspectRatio:t,viewMode:2,dragMode:"crop",preview:".small",responsive:!0,restore:!1,modal:!0,guides:!0,center:!0,highlight:!0,background:!0,autoCrop:!0,autoCropArea:1,movable:!0,scalable:!1,zoomable:!0,rotatable:!1,preview:document.querySelectorAll(".final-img")})}$(".customize").click(function(){e.userSkin.fadeIn(200)});var c={img_title:"",img_back:"",img_column:"",color_title:"",color_title_hover:"",color_sub_title:""};e.userSkin.find(".bt-back").click(function(){s()}),e.userSkin.find(".user-skin-refer").click(function(){window.csdn.userLogin.loadAjax(function(){if(t()){var s=function(t,s){t&&(o(s,!0),setTimeout(function(){var t=i();window.location.href=t.window_url},200))};n("saveSkinCustomer",c,s)}})}),e.userSkin.find(".user-skin-preview").click(function(){if(t()){var i=function(t,i){t&&window.open(i)};n("previewSkin",c,i)}});var r;e.uploadSkinImg.change(function(t){var i=$(this)[0].files[0],s=i.type,n=i.size/1024;if(!/.(jpg|jpeg|png)$/.test(s))return o("请上传jpg、png格式图片",!1),!1;var c=a(i);switch(e.cropBox.find(".crop-img-before img").attr("src",c),r=$(this)[0].id,e.cropBox.find("#cropImg").cropper("destroy"),r){case"uploadHeaderimg":if(d(19.2),2048<n)return void o("请选择2M以内的图片",!1);e.cropBox.find("#cropImg").cropper("setCropBoxData",{width:1920,height:100});break;case"uploadBgimg":if(1024<n)return void o("请选择1M以内的图片",!1);d(1),e.cropBox.find("#cropImg").cropper("setCropBoxData",{width:100,height:100});break;case"uploadColumnimg":if(512<n)return void o("请选择0.5M以内的图片",!1);d(300/38),e.cropBox.find("#cropImg").cropper("setCropBoxData",{width:300,height:38})}e.cropBox.fadeIn(200),$(this)[0].value=""}),e.cropBox.find(".bt-back").click(function(){e.cropBox.fadeOut(200),e.cropBox.find("#cropImg").cropper("destroy")}),e.cropBox.find(".bt-next").click(function(){var t="",i="",s="";switch(r){case"uploadHeaderimg":t=1920,i=100,s="img_title";break;case"uploadBgimg":t=100,i=100,s="img_back";break;case"uploadColumnimg":t=300,i=38,s="img_column"}e.cropBox.find("#cropImg").cropper("getCroppedCanvas",{width:t,height:i,minWidth:t,minHeight:i,maxWidth:t,maxHeight:i}).toBlob(function(t){var i=new FormData;i.append("file",t),i.append("img_type",s),$.ajax("/pheapi/skin/skin_upload_img",{method:"POST",data:i,processData:!1,contentType:!1,xhrFields:{withCredentials:!0},success:function(t){if(t.result){var i=$("#"+r);switch(i.attr("value",t.url),r){case"upload-headerimg":c.img_title=i.val();break;case"upload-bgimg":c.img_back=i.val();break;case"upload-columnimg":c.img_column=i.val()}i.siblings(".upload-img").find(".upload-icon").hide(),i.siblings(".upload-img").find(".success-upload-icon").show(),i.siblings(".upload-img").find(".tip-massage").html("点击重新上传"),o("上传成功",!0),setTimeout(function(){e.cropBox.fadeOut(200)},1e3)}else o(t.content,!1),setTimeout(function(){e.cropBox.fadeOut(200)},1e3)},error:function(t){o("系统错误，请重新上传",!1),setTimeout(function(){e.cropBox.fadeOut(200)},1e3)}})},"image/png")}),e.cropBox.find(".bt-reduce").click(function(){e.cropBox.find("#cropImg").cropper("zoom",-.1)}),e.cropBox.find(".bt-add").click(function(){e.cropBox.find("#cropImg").cropper("zoom",.1)})}var e={skikTemplateBox:$(".skin-template-box"),skinTemplateItem:$(".skin-template-item"),skinList:$(".skin-list"),skinListShow:$(".skin-list-show"),skinItem:$(".skin-item"),skinTipbox:$("#skinTipbox"),skinChange:$("#skinChange"),meUser:$("#meUser"),skinBoxshadow:$(".skin-boxshadow"),userSkin:$("#userSkin"),cropBox:$("#cropBox"),uploadSkinImg:$(".upload-skin-img")};e.skinChange.on("click",function(){e.skikTemplateBox.fadeIn(200)}),$(document).mouseup(function(t){var i=e.skikTemplateBox;i.is(t.target)||0!==i.has(t.target).length||e.skikTemplateBox.fadeOut(200)}),e.skinTemplateItem.on("click",function(){var t=$(this).index();t<2?(e.skinTemplateItem.removeClass("skin-template-item-act"),$(this).addClass("skin-template-item-act"),e.skinList.hide(),e.skinList.eq(t).show()):(e.skikTemplateBox.fadeOut(200),e.userSkin.fadeIn(200))}),e.skinItem.on("click",function(){e.skinListShow.find("li").removeClass("skin-item-act"),$(this).addClass("skin-item-act"),e.skikTemplateBox.fadeOut(200)}),e.skinTipbox.on("click",".skin-exit",function(){e.skinTipbox.slideUp(200);var t=i();setTimeout(function(){window.location.href=t.window_url},200)}),e.skinTipbox.on("click",".skin-save",function(){var s=i(),e=blogUrl+"pheapi/skin/useSkin",n={skin_id:s.skin_id};t(e,n,s)}),s()}),$(function(){$("#csdnc-memberhead").fadeIn(500)});